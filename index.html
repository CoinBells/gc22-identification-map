<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GC-22 3D Identification Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body { margin:0; overflow:hidden; background:#0b0f14; font-family: Arial, sans-serif; }
    canvas { display:block; }
    #panel{
      position:absolute; top:16px; left:16px; width:260px;
      background:rgba(0,0,0,0.78); color:#fff; padding:12px;
      border-radius:10px; z-index:10; user-select:none;
    }
    #panel h4{ margin:0 0 10px; font-size:14px; color:#d7e7ff; }
    .row{ display:flex; justify-content:space-between; align-items:center; margin:6px 0; }
    label{ font-size:13px; }
    input[type="checkbox"]{ transform:scale(1.1); }
    .hint{ margin-top:8px; font-size:12px; opacity:.75; line-height:1.4; }

    #info{
      position:absolute; bottom:20px; left:20px; width:340px;
      background:rgba(0,0,0,0.88); color:#fff; padding:15px;
      border-radius:10px; display:none; z-index:10;
    }
    #info h3{ margin-top:0; color:#4fc3f7; }
  </style>

  <!-- âœ… Fix for: Module name 'three' does not resolve -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
      "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
    }
  }
  </script>
</head>

<body>
  <div id="panel">
    <h4>Layers</h4>
    <div class="row"><label for="z0">Zone 0</label><input id="z0" type="checkbox" checked /></div>
    <div class="row"><label for="z1">Zone 1</label><input id="z1" type="checkbox" checked /></div>
    <div class="row"><label for="z2">Zone 2</label><input id="z2" type="checkbox" checked /></div>
    <div class="row"><label for="eq">Equipment</label><input id="eq" type="checkbox" checked /></div>
    <div class="hint">
      Click equipment or a hazard zone to view details.<br />
      Zoom / rotate using touch gestures.
    </div>
  </div>

  <div id="info"></div>

  <!-- Debug overlay -->
  <script>
    window.addEventListener('error', (e) => {
      const d = document.createElement('div');
      d.style.cssText='position:fixed;left:10px;right:10px;bottom:10px;background:#300;color:#fff;padding:10px;border-radius:8px;z-index:9999;font-size:12px';
      d.textContent='JS Error: ' + (e.message || e.error);
      document.body.appendChild(d);
    });
    window.addEventListener('unhandledrejection', (e) => {
      const d = document.createElement('div');
      d.style.cssText='position:fixed;left:10px;right:10px;bottom:10px;background:#300;color:#fff;padding:10px;border-radius:8px;z-index:9999;font-size:12px';
      d.textContent='Promise Error: ' + (e.reason?.message || e.reason);
      document.body.appendChild(d);
    });
  </script>

  <!-- Your app entry -->
  <script type="module" src="./src/main.js"></script>
</body>
</html>
